---
- name: Ensure Python3 and six are available
  raw: |
    if ! command -v python3 >/dev/null 2>&1; then
      apt-get update -y && apt-get install -y python3 python3-pip
    fi
    python3 -m pip install -q six || true
  changed_when: false

- name: Установка стандартных пакетов
  apt:
    name:
      - net-tools
      - dnsutils
      - wget
      - curl
      - mc
      - rsync
    state: present
    update_cache: yes

- name: Изменение имени хоста на корректное
  hostname:
    name: "{{ inventory_hostname | replace('_','-') }}"
  become: yes
